<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="SSMT3.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:SSMT3"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    xmlns:controls="using:Microsoft.UI.Xaml.Controls"
    Title="SSMT3"
    Closed="Window_Closed">

    <Grid>
        
        <!-- 背景视频 -->
        <controls:WebView2
            x:Name="BackgroundWebView"
            Grid.ColumnSpan="2"
            Grid.RowSpan="2"
            IsHitTestVisible="False"
            Visibility="Collapsed" />

        <!-- 背景图片 -->
        <Image 
            HorizontalAlignment="Right"
            RenderTransformOrigin="0.5,0.5"
            Grid.ColumnSpan="2"
            Grid.RowSpan="2"
            x:Name="MainWindowImageBrush"  
            Stretch="UniformToFill" >
            <Image.RenderTransform>
                <ScaleTransform />
            </Image.RenderTransform>
        </Image>

        <!-- 左侧渐变阴影 -->
        <Rectangle
            x:Name="Rectangle_NavigationShadow"
            Margin="-10"
            Grid.ColumnSpan="2"
            Grid.RowSpan="2"
            Width="60"
            HorizontalAlignment="Left"
            VerticalAlignment="Stretch"
            IsHitTestVisible="False">
            <Rectangle.Fill>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Color="Black" Offset="0"/>
                    <!-- 使用 #00000000 而不是 Transparent，防止插值时出现白色杂色 -->
                    <GradientStop Color="#00000000" Offset="1"/>
                </LinearGradientBrush>
            </Rectangle.Fill>
        </Rectangle>

        <!-- 设置页面背景遮罩 -->
        <Grid
            x:Name="SettingsPageBackgroundOverlay"
            Grid.ColumnSpan="2"
            Grid.RowSpan="2"
            Visibility="Collapsed"
            IsHitTestVisible="False">
            <Grid.Background>
                <AcrylicBrush
                    Opacity="0.95"
                    TintColor="Black"
                    TintOpacity="0.6"
                    FallbackColor="Black"/>
            </Grid.Background>
        </Grid>

        <!-- 导航栏 -->
        <NavigationView  
            IsBackButtonVisible="Visible"
            Margin="-2"
            PaneDisplayMode="LeftCompact" 
            x:Name="nvSample" 
            ItemInvoked="nvSample_ItemInvoked" 
            BackRequested="nvSample_BackRequested"
            IsBackEnabled="{Binding ElementName=contentFrame,Path=CanGoBack}" 
            >
            <NavigationView.Resources>
                <!-- === 强制 Pane 背景为半透明深色（关键！）=== -->
                <SolidColorBrush x:Key="NavigationViewDefaultPaneBackground" Color="#E9000000" />
                <SolidColorBrush x:Key="NavigationViewExpandedPaneBackground" Color="#00000000" />

                <!-- === 文字/图标颜色：始终白色 === -->
                <SolidColorBrush x:Key="NavigationViewItemForeground" Color="White" />
                <SolidColorBrush x:Key="NavigationViewItemForegroundPointerOver" Color="White" />
                <SolidColorBrush x:Key="NavigationViewItemForegroundPressed" Color="White" />
                <SolidColorBrush x:Key="NavigationViewItemForegroundDisabled" Color="White" Opacity="0.5" />
                <SolidColorBrush x:Key="NavigationViewItemForegroundSelected" Color="White" />
                <SolidColorBrush x:Key="NavigationViewItemForegroundSelectedPointerOver" Color="White" />
                <SolidColorBrush x:Key="NavigationViewItemForegroundSelectedPressed" Color="White" />

                <!-- === 图标颜色（保险起见）=== -->
                <SolidColorBrush x:Key="NavigationViewItemIconForeground" Color="White" />
                <SolidColorBrush x:Key="NavigationViewItemIconForegroundSelected" Color="White" />

                <!-- === 分隔线、标题等其他元素（可选但推荐）=== -->
                <SolidColorBrush x:Key="NavigationViewContentBackground" Color="Transparent" />
                <SolidColorBrush x:Key="NavigationViewItemSeparatorForeground" Color="White" Opacity="0.3" />
                <SolidColorBrush x:Key="TextFillColorPrimary" Color="White" />
                <!-- 影响 Header 等 -->
            </NavigationView.Resources>
            
            <NavigationView.MenuItems>
                <NavigationViewItem 
                    x:Name="NavigationViewItem_StarterPage" 
                    Icon="Home" 
                    Content="主页" 
                    Tag="HomePage" />

           

                <NavigationViewItem 
                    x:Name="NavigationViewItem_WorkPage" 
                    Icon="Edit" 
                    Content="工作台" 
                    Tag="WorkPage" />
                
                <NavigationViewItem 
                    x:Name="NavigationViewItem_TexturePage" 
                    Icon="Pictures" 
                    Content="贴图标记" 
                    Tag="TexturePage" />
                
                <NavigationViewItem 
                    x:Name="NavigationViewItem_TextureToolBoxPage" 
                    Icon="Scan" 
                    Content="贴图工具箱" 
                    Tag="TextureToolBoxPage" />
                
                <NavigationViewItem 
                    x:Name="NavigationViewItem_GameTypePage" 
                    Icon="Priority" 
                    Content="数据类型管理" 
                    Tag="GameTypePage" />
                
                <NavigationViewItem 
                    x:Name="NavigationViewItem_ModManagePage" 
                    Icon="Manage" 
                    Content="Mod管理" 
                    Tag="ModManagePage" />
                
                <NavigationViewItem 
                    x:Name="NavigationViewItem_ManuallyReversePage" 
                    Icon="TouchPointer" 
                    Content="手动逆向" 
                    Tag="ManuallyReversePage" />

                <NavigationViewItem 
                    x:Name="NavigationViewItem_AutoReversePage" 
                    Icon="Permissions" 
                    Content="自动逆向" 
                    Tag="AutoReversePage" />
                
                <NavigationViewItem 
                   x:Name="NavigationViewItem_ProtectPage" 
                   Icon="ProtectedDocument" 
                   Content="Mod加密与锁机器码" 
                   Tag="ProtectPage" />

                <NavigationViewItem 
                    x:Name="NavigationViewItem_DocumentPage" 
                    Icon="Library" 
                    Content="SSMT文档" 
                    Tag="DocumentPage" />
            </NavigationView.MenuItems>



            <Grid>
                <Frame 
                    Background="Transparent"
                    x:Name="contentFrame"
                    Navigated="contentFrame_Navigated"/>
            </Grid>
        </NavigationView>

    </Grid>
</Window>
